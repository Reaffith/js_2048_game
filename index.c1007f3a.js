const t=new class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.score=0,this.initialState=t,this.currentState=t,this.isStarted=!1}moveLeft(){let t=!1;for(let e=0;e<4;e++)for(let r=1;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e][r-1]?t=!0:0===this.currentState[e][0]&&(t=!0);if(t&&this.isStarted){for(let t=0;t<4;t++)for(let e=0;e<4;e++){let r=!1,s=this.currentState[t][e];if(0!==s)for(let i=e+1;i<4;i++){let a=this.currentState[t][i];if(0!==a)a===s&&(this.currentState[t][e]=2*s,this.currentState[t][i]=0,this.score+=2*s,r=!0);else if(0===a&&!r)switch(i){case 1:0===this.currentState[t][i+1]?this.currentState[t][i+2]===s&&(this.currentState[t][e]=2*s,this.currentState[t][i+2]=0,r=!0,this.score+=2*s):this.currentState[t][i+1]!==s||r||(this.currentState[t][e]=2*s,this.currentState[t][i+1]=0,this.score+=2*s);break;case 2:this.currentState[t][i+1]===s&&(this.currentState[t][e]=2*s,this.currentState[t][i+1]=0,this.score+=2*s)}}}for(let t=0;t<4;t++)for(let e=1;e<4;e++)if(0!==this.currentState[t][e]){let r=this.currentState[t][e];switch(e){case 1:0===this.currentState[t][0]&&(this.currentState[t][0]=r,this.currentState[t][e]=0);break;case 2:0===this.currentState[t][1]&&(0===this.currentState[t][0]?this.currentState[t][0]=r:this.currentState[t][1]=r,this.currentState[t][e]=0);break;case 3:0===this.currentState[t][2]&&(0===this.currentState[t][1]?0===this.currentState[t][0]?this.currentState[t][0]=r:this.currentState[t][1]=r:this.currentState[t][2]=r,this.currentState[t][e]=0)}}this.clearField(),this.redrawGameField(),this.createPlayCell()}}moveRight(){let t=!1;for(let e=0;e<4;e++)for(let r=1;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e][r-1]&&(t=!0);if(t&&this.isStarted){for(let t=0;t<4;t++)for(let e=3;e>=0;e--){let r=!1,s=this.currentState[t][e];if(0!==s)for(let i=e-1;i>=0;i--){let a=this.currentState[t][i];if(0!==a)a===s&&i===e-1&&(this.currentState[t][e]=2*s,this.currentState[t][i]=0,r=!0);else if(a===s&&!r)switch(i){case 0:0!==this.currentState[t][1]||r||0!==this.currentState[t][2]||(this.currentState[t][e]=2*s,this.currentState[t][i]=0,r=!0,this.score+=2*s);break;case 1:0!==this.currentState[t][2]||r||(this.currentState[t][e]=2*s,this.currentState[t][i]=0,r=!0,this.score+=2*s)}}}for(let t=0;t<4;t++)for(let e=3;e>=0;e--)if(0!==this.currentState[t][e]){let r=this.currentState[t][e];switch(e){case 0:0===this.currentState[t][1]&&(0===this.currentState[t][2]?0===this.currentState[t][3]?this.currentState[t][3]=r:this.currentState[t][2]=r:this.currentState[t][1]=r,this.currentState[t][e]=0);break;case 1:0===this.currentState[t][2]&&(0===this.currentState[t][3]?this.currentState[t][3]=r:this.currentState[t][2]=r,this.currentState[t][e]=0);break;case 2:0===this.currentState[t][3]&&(this.currentState[t][3]=r,this.currentState[t][e]=0)}}this.clearField(),this.redrawGameField(),this.createPlayCell()}}moveUp(){let t=!1;for(let e=1;e<4;e++)for(let r=0;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e-1][r]?t=!0:0===this.currentState[0][r]&&(t=!0);if(t&&this.isStarted){for(let t=0;t<4;t++)for(let e=0;e<4;e++){let r=this.currentState[t][e];switch(t){case 0:0===this.currentState[1][e]?0===this.currentState[2][e]?this.currentState[3][e]===r&&(this.currentState[t][e]=2*r,this.currentState[3][e]=0,this.score+=2*r):this.currentState[2][e]===r&&(this.currentState[t][e]=2*r,this.currentState[2][e]=0,this.score+=2*r):this.currentState[1][e]===r&&(this.currentState[t][e]=2*r,this.currentState[1][e]=0,this.score+=2*r);break;case 1:0===this.currentState[2][e]?this.currentState[3][e]===r&&(this.currentState[t][e]=2*r,this.currentState[3][e]=0,this.score+=2*r):this.currentState[2][e]===r&&(this.currentState[t][e]=2*r,this.currentState[2][e]=0,this.score+=2*r);break;case 2:this.currentState[3][e]===r&&(this.currentState[t][e]=2*r,this.currentState[3][e]=0,this.score+=2*r)}}for(let t=0;t<4;t++)for(let e=0;e<4;e++)switch(t){case 1:0===this.currentState[0][e]&&(this.currentState[0][e]=this.currentState[t][e],this.currentState[t][e]=0);break;case 2:0===this.currentState[1][e]&&(0===this.currentState[0][e]?this.currentState[0][e]=this.currentState[t][e]:this.currentState[1][e]=this.currentState[t][e],this.currentState[t][e]=0);break;case 3:0===this.currentState[2][e]&&(0===this.currentState[1][e]?0===this.currentState[0][e]?this.currentState[0][e]=this.currentState[t][e]:this.currentState[1][e]=this.currentState[t][e]:this.currentState[2][e]=this.currentState[t][e],this.currentState[t][e]=0)}this.clearField(),this.redrawGameField(),this.createPlayCell()}}moveDown(){let t=!1;for(let e=1;e<4;e++)for(let r=0;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e-1][r]&&(t=!0);if(t&&this.isStarted){for(let t=3;t>=0;t--)for(let e=3;e>=0;e--){let r=this.currentState[t][e];switch(t){case 3:0===this.currentState[2][e]?0===this.currentState[1][e]?this.currentState[0][e]===r&&(this.currentState[t][e]=2*r,this.currentState[0][e]=0,this.score+=2*r):this.currentState[1][e]===r&&(this.currentState[t][e]=2*r,this.currentState[1][e]=0,this.score+=2*r):this.currentState[2][e]===r&&(this.currentState[t][e]=2*r,this.currentState[2][e]=0,this.score+=2*r);break;case 2:0===this.currentState[1][e]?this.currentState[0][e]===r&&(this.currentState[t][e]=2*r,this.currentState[0][e]=0,this.score+=2*r):this.currentState[1][e]===r&&(this.currentState[t][e]=2*r,this.currentState[1][e]=0,this.score+=2*r);break;case 1:this.currentState[0][e]===r&&(this.currentState[t][e]=2*r,this.currentState[0][e]=0,this.score+=2*r)}}for(let t=3;t>=0;t--)for(let e=3;e>=0;e--)switch(t){case 2:0===this.currentState[3][e]&&(this.currentState[3][e]=this.currentState[t][e],this.currentState[t][e]=0);break;case 1:0===this.currentState[2][e]&&(0===this.currentState[3][e]?this.currentState[3][e]=this.currentState[t][e]:this.currentState[2][e]=this.currentState[t][e],this.currentState[t][e]=0);break;case 0:0===this.currentState[1][e]&&(0===this.currentState[2][e]?0===this.currentState[3][e]?this.currentState[3][e]=this.currentState[t][e]:this.currentState[2][e]=this.currentState[t][e]:this.currentState[1][e]=this.currentState[t][e],this.currentState[t][e]=0)}this.clearField(),this.redrawGameField(),this.createPlayCell()}}getScore(){return this.score}getState(){return this.currentState}getStatus(){let t=0;for(let e=0;e<4;e++)this.currentState[e].forEach(e=>{t+=e});if(0===t)return"idle";for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(this.currentState[t][e]>=2048)return"win";return this.checkForLose()?"lose":"playing"}start(){this.isStarted=!0,this.createPlayCell(),this.createPlayCell()}restart(){this.isStarted=!1,this.score=0,this.currentState=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.clearField()}clearField(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)document.querySelector(".cell"+t+"-"+e).innerHTML=""}redrawGameField(){for(let t=0;t<4;t++)for(let e=0;e<4;e++){let r=this.currentState[t][e];if(0!==r){let s=document.querySelector(`.cell${t}-${e}`),i=document.createElement("div");i.textContent=r,i.classList.add("field-cell--"+r),s.appendChild(i)}}}generateRandom(){return Math.floor(4*Math.random())}checkForLose(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(0===this.currentState[t][e]||e+1<4&&this.currentState[t][e]===this.currentState[t][e+1]||e-1>=0&&this.currentState[t][e]===this.currentState[t][e-1]||t+1<4&&this.currentState[t][e]===this.currentState[t+1][e]||t-1>=0&&this.currentState[t][e]===this.currentState[t-1][e])return!1;return!0}createPlayCell(){for(;;){let t=this.generateRandom(),e=this.generateRandom();if(0===this.currentState[t][e]){let r=0;0===Math.floor(10*Math.random())?(this.currentState[t][e]=4,r=4):(this.currentState[t][e]=2,r=2);let s=document.querySelector(`.cell${t}-${e}`),i=document.createElement("div");i.textContent=r,i.classList.add("field-cell--"+r),s.appendChild(i);break}}}anilizeStatus(){let t=this.getStatus();return"win"===t?(this.isStarted=!1,"win"):"lose"===t?(this.isStarted=!1,"lose"):void 0}visualiseScore(t){t.textContent=this.score}},e=document.querySelector(".start"),r=document.querySelector(".game-score"),s=document.querySelector(".restart"),i=document.querySelector(".message-win"),a=document.querySelector(".message-lose"),c=document.querySelector(".message-start");function n(){let e=t.anilizeStatus(t.getStatus());return"win"===e?(i.style.display="block","win"):"lose"===e?(a.style.display="block","lose"):"playing"}e.addEventListener("click",()=>{t.start(),e.style.display="none",s.style.display="block",a.style.display="none",i.style.display="none",c.style.display="none"}),s.addEventListener("click",()=>{t.restart(),t.start(),a.style.display="none",i.style.display="none",t.visualiseScore(r)}),document.addEventListener("keydown",e=>{let s=e.key;"ArrowLeft"===s?(t.moveLeft(),t.visualiseScore(r),n()):"ArrowRight"===s?(t.moveRight(),t.visualiseScore(r),n()):"ArrowUp"===s?(t.moveUp(),t.visualiseScore(r),n()):"ArrowDown"===s&&(t.moveDown(),t.visualiseScore(r),n())});
//# sourceMappingURL=index.c1007f3a.js.map
