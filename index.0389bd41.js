!function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=new(function(){var e,r;function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),this.score=0,this.initialState=t,this.currentState=t,this.isStarted=!1}return e=[{key:"moveLeft",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=1;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e][r-1]?t=!0:0===this.currentState[e][0]&&(t=!0);if(t&&this.isStarted){for(var a=0;a<4;a++)for(var i=0;i<4;i++){var s=!1,c=this.currentState[a][i];if(0!==c)for(var n=i+1;n<4;n++){var u=this.currentState[a][n];if(0!==u)u===c&&(this.currentState[a][i]=2*c,this.currentState[a][n]=0,this.score+=2*c,s=!0);else if(0===u&&!s)switch(n){case 1:0===this.currentState[a][n+1]?this.currentState[a][n+2]===c&&(this.currentState[a][i]=2*c,this.currentState[a][n+2]=0,s=!0,this.score+=2*c):this.currentState[a][n+1]!==c||s||(this.currentState[a][i]=2*c,this.currentState[a][n+1]=0,this.score+=2*c);break;case 2:this.currentState[a][n+1]===c&&(this.currentState[a][i]=2*c,this.currentState[a][n+1]=0,this.score+=2*c)}}}for(var h=0;h<4;h++)for(var S=1;S<4;S++)if(0!==this.currentState[h][S]){var o=this.currentState[h][S];switch(S){case 1:0===this.currentState[h][0]&&(this.currentState[h][0]=o,this.currentState[h][S]=0);break;case 2:0===this.currentState[h][1]&&(0===this.currentState[h][0]?this.currentState[h][0]=o:this.currentState[h][1]=o,this.currentState[h][S]=0);break;case 3:0===this.currentState[h][2]&&(0===this.currentState[h][1]?0===this.currentState[h][0]?this.currentState[h][0]=o:this.currentState[h][1]=o:this.currentState[h][2]=o,this.currentState[h][S]=0)}}this.clearField(),this.redrawGameField(),this.createPlayCell()}}},{key:"moveRight",value:function(){for(var t=!1,e=0;e<4;e++)for(var r=1;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e][r-1]&&(t=!0);if(t&&this.isStarted){for(var a=0;a<4;a++)for(var i=3;i>=0;i--){var s=!1,c=this.currentState[a][i];if(0!==c)for(var n=i-1;n>=0;n--){var u=this.currentState[a][n];if(0!==u)u===c&&n===i-1&&(this.currentState[a][i]=2*c,this.currentState[a][n]=0,s=!0);else if(u===c&&!s)switch(n){case 0:0!==this.currentState[a][1]||s||0!==this.currentState[a][2]||(this.currentState[a][i]=2*c,this.currentState[a][n]=0,s=!0,this.score+=2*c);break;case 1:0!==this.currentState[a][2]||s||(this.currentState[a][i]=2*c,this.currentState[a][n]=0,s=!0,this.score+=2*c)}}}for(var h=0;h<4;h++)for(var S=3;S>=0;S--)if(0!==this.currentState[h][S]){var o=this.currentState[h][S];switch(S){case 0:0===this.currentState[h][1]&&(0===this.currentState[h][2]?0===this.currentState[h][3]?this.currentState[h][3]=o:this.currentState[h][2]=o:this.currentState[h][1]=o,this.currentState[h][S]=0);break;case 1:0===this.currentState[h][2]&&(0===this.currentState[h][3]?this.currentState[h][3]=o:this.currentState[h][2]=o,this.currentState[h][S]=0);break;case 2:0===this.currentState[h][3]&&(this.currentState[h][3]=o,this.currentState[h][S]=0)}}this.clearField(),this.redrawGameField(),this.createPlayCell()}}},{key:"moveUp",value:function(){for(var t=!1,e=1;e<4;e++)for(var r=0;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e-1][r]?t=!0:0===this.currentState[0][r]&&(t=!0);if(t&&this.isStarted){for(var a=0;a<4;a++)for(var i=0;i<4;i++){var s=this.currentState[a][i];switch(a){case 0:0===this.currentState[1][i]?0===this.currentState[2][i]?this.currentState[3][i]===s&&(this.currentState[a][i]=2*s,this.currentState[3][i]=0,this.score+=2*s):this.currentState[2][i]===s&&(this.currentState[a][i]=2*s,this.currentState[2][i]=0,this.score+=2*s):this.currentState[1][i]===s&&(this.currentState[a][i]=2*s,this.currentState[1][i]=0,this.score+=2*s);break;case 1:0===this.currentState[2][i]?this.currentState[3][i]===s&&(this.currentState[a][i]=2*s,this.currentState[3][i]=0,this.score+=2*s):this.currentState[2][i]===s&&(this.currentState[a][i]=2*s,this.currentState[2][i]=0,this.score+=2*s);break;case 2:this.currentState[3][i]===s&&(this.currentState[a][i]=2*s,this.currentState[3][i]=0,this.score+=2*s)}}for(var c=0;c<4;c++)for(var n=0;n<4;n++)switch(c){case 1:0===this.currentState[0][n]&&(this.currentState[0][n]=this.currentState[c][n],this.currentState[c][n]=0);break;case 2:0===this.currentState[1][n]&&(0===this.currentState[0][n]?this.currentState[0][n]=this.currentState[c][n]:this.currentState[1][n]=this.currentState[c][n],this.currentState[c][n]=0);break;case 3:0===this.currentState[2][n]&&(0===this.currentState[1][n]?0===this.currentState[0][n]?this.currentState[0][n]=this.currentState[c][n]:this.currentState[1][n]=this.currentState[c][n]:this.currentState[2][n]=this.currentState[c][n],this.currentState[c][n]=0)}this.clearField(),this.redrawGameField(),this.createPlayCell()}}},{key:"moveDown",value:function(){for(var t=!1,e=1;e<4;e++)for(var r=0;r<4;r++)0===this.currentState[e][r]?t=!0:this.currentState[e][r]===this.currentState[e-1][r]&&(t=!0);if(t&&this.isStarted){for(var a=3;a>=0;a--)for(var i=3;i>=0;i--){var s=this.currentState[a][i];switch(a){case 3:0===this.currentState[2][i]?0===this.currentState[1][i]?this.currentState[0][i]===s&&(this.currentState[a][i]=2*s,this.currentState[0][i]=0,this.score+=2*s):this.currentState[1][i]===s&&(this.currentState[a][i]=2*s,this.currentState[1][i]=0,this.score+=2*s):this.currentState[2][i]===s&&(this.currentState[a][i]=2*s,this.currentState[2][i]=0,this.score+=2*s);break;case 2:0===this.currentState[1][i]?this.currentState[0][i]===s&&(this.currentState[a][i]=2*s,this.currentState[0][i]=0,this.score+=2*s):this.currentState[1][i]===s&&(this.currentState[a][i]=2*s,this.currentState[1][i]=0,this.score+=2*s);break;case 1:this.currentState[0][i]===s&&(this.currentState[a][i]=2*s,this.currentState[0][i]=0,this.score+=2*s)}}for(var c=3;c>=0;c--)for(var n=3;n>=0;n--)switch(c){case 2:0===this.currentState[3][n]&&(this.currentState[3][n]=this.currentState[c][n],this.currentState[c][n]=0);break;case 1:0===this.currentState[2][n]&&(0===this.currentState[3][n]?this.currentState[3][n]=this.currentState[c][n]:this.currentState[2][n]=this.currentState[c][n],this.currentState[c][n]=0);break;case 0:0===this.currentState[1][n]&&(0===this.currentState[2][n]?0===this.currentState[3][n]?this.currentState[3][n]=this.currentState[c][n]:this.currentState[2][n]=this.currentState[c][n]:this.currentState[1][n]=this.currentState[c][n],this.currentState[c][n]=0)}this.clearField(),this.redrawGameField(),this.createPlayCell()}}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.currentState}},{key:"getStatus",value:function(){for(var t=0,e=0;e<4;e++)this.currentState[e].forEach(function(e){t+=e});if(0===t)return"idle";for(var r=0;r<4;r++)for(var a=0;a<4;a++)if(this.currentState[r][a]>=2048)return"win";return this.checkForLose()?"lose":"playing"}},{key:"start",value:function(){this.isStarted=!0,this.createPlayCell(),this.createPlayCell()}},{key:"restart",value:function(){this.isStarted=!1,this.score=0,this.currentState=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.clearField()}},{key:"clearField",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)document.querySelector(".cell"+t+"-"+e).innerHTML=""}},{key:"redrawGameField",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var r=this.currentState[t][e];if(0!==r){var a=document.querySelector(".cell".concat(t,"-").concat(e)),i=document.createElement("div");i.textContent=r,i.classList.add("field-cell--"+r),a.appendChild(i)}}}},{key:"generateRandom",value:function(){return Math.floor(4*Math.random())}},{key:"checkForLose",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===this.currentState[t][e]||e+1<4&&this.currentState[t][e]===this.currentState[t][e+1]||e-1>=0&&this.currentState[t][e]===this.currentState[t][e-1]||t+1<4&&this.currentState[t][e]===this.currentState[t+1][e]||t-1>=0&&this.currentState[t][e]===this.currentState[t-1][e])return!1;return!0}},{key:"createPlayCell",value:function(){for(;;){var t=this.generateRandom(),e=this.generateRandom();if(0===this.currentState[t][e]){var r=0;0===Math.floor(10*Math.random())?(this.currentState[t][e]=4,r=4):(this.currentState[t][e]=2,r=2);var a=document.querySelector(".cell".concat(t,"-").concat(e)),i=document.createElement("div");i.textContent=r,i.classList.add("field-cell--"+r),a.appendChild(i);break}}}},{key:"anilizeStatus",value:function(){var t=this.getStatus();return"win"===t?(this.isStarted=!1,"win"):"lose"===t?(this.isStarted=!1,"lose"):void 0}},{key:"visualiseScore",value:function(t){t.textContent=this.score}}],t(a.prototype,e),r&&t(a,r),a}()),r=document.querySelector(".start"),a=document.querySelector(".game-score"),i=document.querySelector(".restart"),s=document.querySelector(".message-win"),c=document.querySelector(".message-lose"),n=document.querySelector(".message-start");function u(){var t=e.anilizeStatus(e.getStatus());return"win"===t?(s.style.display="block","win"):"lose"===t?(c.style.display="block","lose"):"playing"}r.addEventListener("click",function(){e.start(),r.style.display="none",i.style.display="block",c.style.display="none",s.style.display="none",n.style.display="none"}),i.addEventListener("click",function(){e.restart(),e.start(),c.style.display="none",s.style.display="none",e.visualiseScore(a)}),document.addEventListener("keydown",function(t){var r=t.key;"ArrowLeft"===r?(e.moveLeft(),e.visualiseScore(a),u()):"ArrowRight"===r?(e.moveRight(),e.visualiseScore(a),u()):"ArrowUp"===r?(e.moveUp(),e.visualiseScore(a),u()):"ArrowDown"===r&&(e.moveDown(),e.visualiseScore(a),u())})}();
//# sourceMappingURL=index.0389bd41.js.map
